!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Slate={})}(this,(function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var o=n((function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0}));r(o);var i=n((function(e){e.exports=function(e){if(Array.isArray(e))return o(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));r(i);var a=n((function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0}));r(a);var s=n((function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0}));r(s);var u=n((function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));r(u);var c=r(n((function(e){e.exports=function(e){return i(e)||a(e)||s(e)||u()},e.exports.default=e.exports,e.exports.__esModule=!0}))),f=n((function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0}));r(f);var l=n((function(e){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}},e.exports.default=e.exports,e.exports.__esModule=!0}));r(l);var d=n((function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0}));r(d);var h=r(n((function(e){e.exports=function(e,t){return f(e)||l(e,t)||s(e,t)||d()},e.exports.default=e.exports,e.exports.__esModule=!0}))),v=r(n((function(e){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0}))),p=new WeakMap,g=new WeakMap,y=new WeakMap,m=new WeakMap,b=new WeakMap,w=new WeakMap;function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){switch(e.type){case"insert_text":case"remove_text":case"set_node":var t=e.path;return tt.levels(t);case"insert_node":var r=e.node,n=e.path,o=tt.levels(n),i=pt.isText(r)?[]:Array.from(Xe.nodes(r),(function(e){var t=h(e,2)[1];return n.concat(t)}));return[].concat(c(o),c(i));case"merge_node":var a=e.path,s=tt.ancestors(a),u=tt.previous(a);return[].concat(c(s),[u]);case"move_node":var f=e.path,l=e.newPath;if(tt.equals(f,l))return[];var d,v=[],p=[],g=P(tt.ancestors(f));try{for(g.s();!(d=g.n()).done;){var y=d.value,m=tt.transform(y,e);v.push(m)}}catch(e){g.e(e)}finally{g.f()}var b,w=P(tt.ancestors(l));try{for(w.s();!(b=w.n()).done;){var x=b.value,O=tt.transform(x,e);p.push(O)}}catch(e){w.e(e)}finally{w.f()}var A=p[p.length-1],k=l[l.length-1],j=A.concat(k);return[].concat(v,p,[j]);case"remove_node":var E=e.path,F=tt.ancestors(E);return c(F);case"split_node":var S=e.path,_=tt.levels(S),D=tt.next(S);return[].concat(c(_),[D]);default:return[]}},j=n((function(e){e.exports=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o},e.exports.default=e.exports,e.exports.__esModule=!0}));r(j);var E=r(n((function(e){e.exports=function(e,t){if(null==e)return{};var r,n,o=j(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},e.exports.default=e.exports,e.exports.__esModule=!0}))),F=n((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),a=new F(n||[]);return i._invoke=function(e,t,r){var n=l;return function(o,i){if(n===h)throw new Error("Generator is already running");if(n===v){if("throw"===o)throw i;return _()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=k(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=f(e,t,r);if("normal"===u.type){if(n=r.done?v:d,u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=v,r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",d="suspendedYield",h="executing",v="completed",p={};function g(){}function y(){}function m(){}var b={};b[i]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(S([])));x&&x!==r&&n.call(x,i)&&(b=x);var O=m.prototype=g.prototype=Object.create(b);function P(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){var r;this._invoke=function(o,i){function a(){return new t((function(r,a){!function r(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function k(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=f(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function S(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:_}}function _(){return{value:t,done:!0}}return y.prototype=O.constructor=m,m.constructor=y,y.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},P(A.prototype),A.prototype[a]=function(){return this},e.AsyncIterator=A,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new A(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},P(O),u(O,s,"Generator"),O[i]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=S,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:S(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));
/*!
	 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */
function S(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);
/*!
	 * isobject <https://github.com/jonschlinkert/isobject>
	 *
	 * Copyright (c) 2014-2017, Jon Schlinkert.
	 * Released under the MIT License.
	 */
var t}function _(e){var t,r;return!1!==S(e)&&("function"==typeof(t=e.constructor)&&(!1!==S(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))}var D=n((function(e,r){!function(n){var o=r,i=e&&e.exports==o&&e,a="object"==typeof t&&t;a.global!==a&&a.window!==a||(n=a);var s=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,u=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,c=function(e){for(var t="",r=(e=e.replace(s,(function(e,t,r){return c(r)+t})).replace(u,"$2$1")).length;r--;)t+=e.charAt(r);return t},f={version:"0.2.0",reverse:c};if(o&&!o.nodeType)if(i)i.exports=f;else for(var l in f)f.hasOwnProperty(l)&&(o[l]=f[l]);else n.esrever=f}(t)})).reverse,N=/\s/,C=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,B=/['\u2018\u2019]/,R=function(e){for(var t=0,r=null,n=e.charCodeAt(0);n;)if(M(n)){var o=q(n,e,t);if("SURR"===r||"BMP"===r)break;t+=2,r=o?"MOD":"SURR",n=e.charCodeAt(t)}else if(8205!==n)if(z(n)){if(r&&"ZWJ"!==r&&"VAR"!==r)break;t+=1,r="BMP",n=e.charCodeAt(t)}else{if(!L(n)){if("MOD"===r){t+=1;break}break}if(r&&"ZWJ"!==r)break;t+=1,r="VAR",n=e.charCodeAt(t)}else t+=1,r="ZWJ",n=e.charCodeAt(t);return t||1},T=function(e){for(var t,r=0,n=0,o=!1;t=e.charAt(n);){var i=R(t);t=e.slice(n,n+i);var a=e.slice(n+i);if(I(t,a))o=!0,r+=i;else{if(o)break;r+=i}n+=i}return r},I=function e(t,r){if(N.test(t))return!1;if(B.test(t)){var n=r.charAt(0),o=R(n);if(e(n=r.slice(0,o),r.slice(o)))return!0}return!C.test(t)},M=function(e){return 55296<=e&&e<=57343},q=function(e,t,r){if(55356===e){var n=t.charCodeAt(r+1);return n<=57343&&n>=57339}return!1},L=function(e){return e<=65039&&e>=65024},z=function(e){return 10084===e||9794===e||9792===e||9760===e||9877===e||9992===e||9711===e},W=function(e){return _(e)&&Xe.isNodeList(e.children)&&!Y.isEditor(e)},V={isAncestor:function(e){return _(e)&&Xe.isNodeList(e.children)},isElement:W,isElementList:function(e){return Array.isArray(e)&&e.every((function(e){return V.isElement(e)}))},isElementProps:function(e){return void 0!==e.children},isElementType:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";return W(e)&&e[r]===t},matches:function(e,t){for(var r in t)if("children"!==r&&e[r]!==t[r])return!1;return!0}};function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K=new WeakMap,Y={above:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.voids,n=void 0!==r&&r,o=t.mode,i=void 0===o?"lowest":o,a=t.at,s=void 0===a?e.selection:a,u=t.match;if(s){var c,f=Y.path(e,s),l="lowest"===i,d=J(Y.levels(e,{at:f,voids:n,match:u,reverse:l}));try{for(d.s();!(c=d.n()).done;){var v=h(c.value,2),p=v[0],g=v[1];if(!pt.isText(p)&&!tt.equals(f,g))return[p,g]}}catch(e){d.e(e)}finally{d.f()}}},addMark:function(e,t,r){e.addMark(t,r)},after:function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Y.point(e,t,{edge:"end"}),a=Y.end(e,[]),s={anchor:i,focus:a},u=o.distance,c=void 0===u?1:u,f=0,l=J(Y.positions(e,$($({},o),{},{at:s})));try{for(l.s();!(n=l.n()).done;){var d=n.value;if(f>c)break;0!==f&&(r=d),f++}}catch(e){l.e(e)}finally{l.f()}return r},before:function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Y.start(e,[]),a=Y.point(e,t,{edge:"start"}),s={anchor:i,focus:a},u=o.distance,c=void 0===u?1:u,f=0,l=J(Y.positions(e,$($({},o),{},{at:s,reverse:!0})));try{for(l.s();!(n=l.n()).done;){var d=n.value;if(f>c)break;0!==f&&(r=d),f++}}catch(e){l.e(e)}finally{l.f()}return r},deleteBackward:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.unit,n=void 0===r?"character":r;e.deleteBackward(n)},deleteForward:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.unit,n=void 0===r?"character":r;e.deleteForward(n)},deleteFragment:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.direction,n=void 0===r?"forward":r;e.deleteFragment(n)},edges:function(e,t){return[Y.start(e,t),Y.end(e,t)]},end:function(e,t){return Y.point(e,t,{edge:"end"})},first:function(e,t){var r=Y.path(e,t,{edge:"start"});return Y.node(e,r)},fragment:function(e,t){var r=Y.range(e,t),n=Xe.fragment(e,r);return n},hasBlocks:function(e,t){return t.children.some((function(t){return Y.isBlock(e,t)}))},hasInlines:function(e,t){return t.children.some((function(t){return pt.isText(t)||Y.isInline(e,t)}))},hasTexts:function(e,t){return t.children.every((function(e){return pt.isText(e)}))},insertBreak:function(e){e.insertBreak()},insertFragment:function(e,t){e.insertFragment(t)},insertNode:function(e,t){e.insertNode(t)},insertText:function(e,t){e.insertText(t)},isBlock:function(e,t){return V.isElement(t)&&!e.isInline(t)},isEditor:function(e){if(!_(e))return!1;var t=K.get(e);if(void 0!==t)return t;var r="function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteBackward&&"function"==typeof e.deleteForward&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isInline&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&(null===e.marks||_(e.marks))&&(null===e.selection||ut.isRange(e.selection))&&Xe.isNodeList(e.children)&&et.isOperationList(e.operations);return K.set(e,r),r},isEnd:function(e,t,r){var n=Y.end(e,r);return it.equals(t,n)},isEdge:function(e,t,r){return Y.isStart(e,t,r)||Y.isEnd(e,t,r)},isEmpty:function(e,t){var r=t.children,n=h(r,1)[0];return 0===r.length||1===r.length&&pt.isText(n)&&""===n.text&&!e.isVoid(t)},isInline:function(e,t){return V.isElement(t)&&e.isInline(t)},isNormalizing:function(e){var t=y.get(e);return void 0===t||t},isStart:function(e,t,r){if(0!==t.offset)return!1;var n=Y.start(e,r);return it.equals(t,n)},isVoid:function(e,t){return V.isElement(t)&&e.isVoid(t)},last:function(e,t){var r=Y.path(e,t,{edge:"end"});return Y.node(e,r)},leaf:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Y.path(e,t,r),o=Xe.leaf(e,n);return[o,n]},levels:F.mark((function(e){var t,r,n,o,i,a,s,u,c,f,l,d,v,p,g,y=arguments;return F.wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(t=y.length>1&&void 0!==y[1]?y[1]:{},r=t.at,n=void 0===r?e.selection:r,o=t.reverse,i=void 0!==o&&o,a=t.voids,s=void 0!==a&&a,null==(u=t.match)&&(u=function(){return!0}),n){m.next=6;break}return m.abrupt("return");case 6:c=[],f=Y.path(e,n),l=J(Xe.levels(e,f)),m.prev=9,l.s();case 11:if((d=l.n()).done){m.next=20;break}if(v=h(d.value,2),p=v[0],g=v[1],u(p,g)){m.next=15;break}return m.abrupt("continue",18);case 15:if(c.push([p,g]),s||!Y.isVoid(e,p)){m.next=18;break}return m.abrupt("break",20);case 18:m.next=11;break;case 20:m.next=25;break;case 22:m.prev=22,m.t0=m.catch(9),l.e(m.t0);case 25:return m.prev=25,l.f(),m.finish(25);case 28:return i&&c.reverse(),m.delegateYield(c,"t1",30);case 30:case"end":return m.stop()}}),c,null,[[9,22,25,28]])})),marks:function(e){var t=e.marks,r=e.selection;if(!r)return null;if(t)return t;if(ut.isExpanded(r)){var n=Y.nodes(e,{match:pt.isText}),o=h(n,1)[0];if(o){var i=h(o,1)[0];i.text;return E(i,["text"])}return{}}var a=r.anchor,s=a.path,u=Y.leaf(e,s),c=h(u,1)[0];if(0===a.offset){var f=Y.previous(e,{at:s,match:pt.isText}),l=Y.above(e,{match:function(t){return Y.isBlock(e,t)}});if(f&&l){var d=h(f,2),v=d[0],p=d[1],g=h(l,2)[1];tt.isAncestor(g,p)&&(c=v)}}var y=c;y.text;return E(y,["text"])},next:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,s=t.at,u=void 0===s?e.selection:s;if(u){var c=Y.after(e,u,{voids:i});if(c){var f=Y.last(e,[]),l=h(f,2),d=l[1],v=[c.path,d];if(tt.isPath(u)&&0===u.length)throw new Error("Cannot get the next node from the root node!");if(null==a)if(tt.isPath(u)){var p=Y.parent(e,u),g=h(p,1),y=g[0];a=function(e){return y.children.includes(e)}}else a=function(){return!0};var m=Y.nodes(e,{at:v,match:a,mode:n,voids:i}),b=h(m,1),w=b[0];return w}}},node:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Y.path(e,t,r),o=Xe.get(e,n);return[o,n]},nodes:F.mark((function e(t){var r,n,o,i,a,s,u,c,f,l,d,v,p,g,y,m,b,w,x,O,P,A,k,j,E,S,_=arguments;return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_.length>1&&void 0!==_[1]?_[1]:{},n=r.at,o=void 0===n?t.selection:n,i=r.mode,a=void 0===i?"all":i,s=r.universal,u=void 0!==s&&s,c=r.reverse,f=void 0!==c&&c,l=r.voids,d=void 0!==l&&l,(v=r.match)||(v=function(){return!0}),o){e.next=6;break}return e.abrupt("return");case 6:X.isSpan(o)?(p=o[0],g=o[1]):(y=Y.path(t,o,{edge:"start"}),m=Y.path(t,o,{edge:"end"}),p=f?m:y,g=f?y:m),b=Xe.nodes(t,{reverse:f,from:p,to:g,pass:function(e){var r=h(e,1)[0];return!d&&Y.isVoid(t,r)}}),w=[],O=J(b),e.prev=10,O.s();case 12:if((P=O.n()).done){e.next=37;break}if(A=h(P.value,2),k=A[0],j=A[1],E=x&&0===tt.compare(j,x[1]),"highest"!==a||!E){e.next=17;break}return e.abrupt("continue",35);case 17:if(v(k,j)){e.next=23;break}if(!u||E||!pt.isText(k)){e.next=22;break}return e.abrupt("return");case 22:return e.abrupt("continue",35);case 23:if("lowest"!==a||!E){e.next=26;break}return x=[k,j],e.abrupt("continue",35);case 26:if(!(S="lowest"===a?x:[k,j])){e.next=34;break}if(!u){e.next=32;break}w.push(S),e.next=34;break;case 32:return e.next=34,S;case 34:x=[k,j];case 35:e.next=12;break;case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(10),O.e(e.t0);case 42:return e.prev=42,O.f(),e.finish(42);case 45:if("lowest"!==a||!x){e.next=52;break}if(!u){e.next=50;break}w.push(x),e.next=52;break;case 50:return e.next=52,x;case 52:if(!u){e.next=54;break}return e.delegateYield(w,"t1",54);case 54:case"end":return e.stop()}}),e,null,[[10,39,42,45]])})),normalize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.force,n=void 0!==r&&r,o=function(e){return p.get(e)||[]};if(Y.isNormalizing(e)){if(n){var i=Array.from(Xe.nodes(e),(function(e){return h(e,2)[1]}));p.set(e,i)}0!==o(e).length&&Y.withoutNormalizing(e,(function(){var t,r=J(o(e));try{for(r.s();!(t=r.n()).done;){var n=t.value;if(Xe.has(e,n)){var i=Y.node(e,n),a=h(i,2),s=a[0];a[1];if(V.isElement(s)&&0===s.children.length){Tt.insertNodes(e,{text:""},{at:n.concat(0),voids:!0})}}}}catch(e){r.e(e)}finally{r.f()}for(var u=42*o(e).length,c=0;0!==o(e).length;){if(c>u)throw new Error("\n            Could not completely normalize the editor after ".concat(u," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          "));var f=o(e).pop();if(Xe.has(e,f)){var l=Y.node(e,f);e.normalizeNode(l)}c++}}))}},parent:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Y.path(e,t,r),o=tt.parent(n),i=Y.node(e,o);return i},path:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.depth,o=r.edge;if(tt.isPath(t))if("start"===o){var i=Xe.first(e,t),a=h(i,2),s=a[1];t=s}else if("end"===o){var u=Xe.last(e,t),c=h(u,2),f=c[1];t=f}return ut.isRange(t)&&(t="start"===o?ut.start(t):"end"===o?ut.end(t):tt.common(t.anchor.path,t.focus.path)),it.isPoint(t)&&(t=t.path),null!=n&&(t=t.slice(0,n)),t},hasPath:function(e,t){return Xe.has(e,t)},pathRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return Y.pathRefs(e).delete(i),i.current=null,t}},a=Y.pathRefs(e);return a.add(i),i},pathRefs:function(e){var t=m.get(e);return t||(t=new Set,m.set(e,t)),t},point:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.edge,o=void 0===n?"start":n;if(tt.isPath(t)){var i;if("end"===o){var a=Xe.last(e,t),s=h(a,2),u=s[1];i=u}else{var c=Xe.first(e,t),f=h(c,2),l=f[1];i=l}var d=Xe.get(e,i);if(!pt.isText(d))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(t,"] because it has no ").concat(o," text node."));return{path:i,offset:"end"===o?d.text.length:0}}if(ut.isRange(t)){var v=ut.edges(t),p=h(v,2),g=p[0],y=p[1];return"start"===o?g:y}return t},pointRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return Y.pointRefs(e).delete(i),i.current=null,t}},a=Y.pointRefs(e);return a.add(i),i},pointRefs:function(e){var t=b.get(e);return t||(t=new Set,b.set(e,t)),t},positions:F.mark((function e(t){var r,n,o,i,a,s,u,c,f,l,d,v,p,g,y,m,b,w,x,O,P,A,k,j,E,S,_,N,C,B=arguments;return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C=function(e,t){return"character"===t?R(e):"word"===t?T(e):"line"===t||"block"===t?e.length:1},r=B.length>1&&void 0!==B[1]?B[1]:{},n=r.at,o=void 0===n?t.selection:n,i=r.unit,a=void 0===i?"offset":i,s=r.reverse,u=void 0!==s&&s,c=r.voids,f=void 0!==c&&c,o){e.next=5;break}return e.abrupt("return");case 5:l=Y.range(t,o),d=ut.edges(l),v=h(d,2),p=v[0],g=v[1],y=u?g:p,m=!1,b="",w=0,x=0,O=0,P=J(Y.nodes(t,{at:o,reverse:u,voids:f})),e.prev=14,P.s();case 16:if((A=P.n()).done){e.next=51;break}if(k=h(A.value,2),j=k[0],E=k[1],!V.isElement(j)){e.next=26;break}if(f||!t.isVoid(j)){e.next=23;break}return e.next=22,Y.start(t,E);case 22:return e.abrupt("continue",49);case 23:if(!t.isInline(j)){e.next=25;break}return e.abrupt("continue",49);case 25:Y.hasInlines(t,j)&&(S=tt.isAncestor(E,g.path)?g:Y.end(t,E),_=tt.isAncestor(E,p.path)?p:Y.start(t,E),b=Y.string(t,{anchor:_,focus:S},{voids:f}),b=u?D(b):b,m=!0);case 26:if(!pt.isText(j)){e.next=49;break}if((N=tt.equals(E,y.path))?(x=u?y.offset:j.text.length-y.offset,O=y.offset):(x=j.text.length,O=u?x:0),!N&&!m&&"offset"!==a){e.next=33;break}return e.next=32,{path:E,offset:O};case 32:m=!1;case 33:if(0!==w){e.next=39;break}if(""!==b){e.next=37;break}return e.abrupt("break",49);case 37:w=C(b,a),b=b.slice(w);case 39:if(O=u?O-w:O+w,!((x-=w)<0)){e.next=44;break}return w=-x,e.abrupt("break",49);case 44:return w=0,e.next=47,{path:E,offset:O};case 47:e.next=33;break;case 49:e.next=16;break;case 51:e.next=56;break;case 53:e.prev=53,e.t0=e.catch(14),P.e(e.t0);case 56:return e.prev=56,P.f(),e.finish(56);case 59:case"end":return e.stop()}}),e,null,[[14,53,56,59]])})),previous:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,s=t.at,u=void 0===s?e.selection:s;if(u){var c=Y.before(e,u,{voids:i});if(c){var f=Y.first(e,[]),l=h(f,2),d=l[1],v=[c.path,d];if(tt.isPath(u)&&0===u.length)throw new Error("Cannot get the previous node from the root node!");if(null==a)if(tt.isPath(u)){var p=Y.parent(e,u),g=h(p,1),y=g[0];a=function(e){return y.children.includes(e)}}else a=function(){return!0};var m=Y.nodes(e,{reverse:!0,at:v,match:a,mode:n,voids:i}),b=h(m,1),w=b[0];return w}}},range:function(e,t,r){return ut.isRange(t)&&!r?t:{anchor:Y.start(e,t),focus:Y.end(e,r||t)}},rangeRef:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.affinity,o=void 0===n?"forward":n,i={current:t,affinity:o,unref:function(){var t=i.current;return Y.rangeRefs(e).delete(i),i.current=null,t}},a=Y.rangeRefs(e);return a.add(i),i},rangeRefs:function(e){var t=w.get(e);return t||(t=new Set,w.set(e,t)),t},removeMark:function(e,t){e.removeMark(t)},setNormalizing:function(e,t){y.set(e,t)},start:function(e,t){return Y.point(e,t,{edge:"start"})},string:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.voids,i=void 0!==o&&o,a=Y.range(e,t),s=ut.edges(a),u=h(s,2),c=u[0],f=u[1],l="",d=J(Y.nodes(e,{at:a,match:pt.isText,voids:i}));try{for(d.s();!(r=d.n()).done;){var v=h(r.value,2),p=v[0],g=v[1],y=p.text;tt.equals(g,f.path)&&(y=y.slice(0,f.offset)),tt.equals(g,c.path)&&(y=y.slice(c.offset)),l+=y}}catch(e){d.e(e)}finally{d.f()}return l},unhangRange:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.voids,o=void 0!==n&&n,i=ut.edges(t),a=h(i,2),s=a[0],u=a[1];if(0!==s.offset||0!==u.offset||ut.isCollapsed(t))return t;var c,f=Y.above(e,{at:u,match:function(t){return Y.isBlock(e,t)}}),l=f?f[1]:[],d=Y.start(e,[]),v={anchor:d,focus:u},p=!0,g=J(Y.nodes(e,{at:v,match:pt.isText,reverse:!0,voids:o}));try{for(g.s();!(c=g.n()).done;){var y=h(c.value,2),m=y[0],b=y[1];if(p)p=!1;else if(""!==m.text||tt.isBefore(b,l)){u={path:b,offset:m.text.length};break}}}catch(e){g.e(e)}finally{g.f()}return{anchor:s,focus:u}},void:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Y.above(e,$($({},t),{},{match:function(t){return Y.isVoid(e,t)}}))},withoutNormalizing:function(e,t){var r=Y.isNormalizing(e);Y.setNormalizing(e,!1);try{t()}finally{Y.setNormalizing(e,r)}Y.normalize(e)}},Z={isLocation:function(e){return tt.isPath(e)||it.isPoint(e)||ut.isRange(e)}},X={isSpan:function(e){return Array.isArray(e)&&2===e.length&&e.every(tt.isPath)}};function H(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Q(e){return!!e&&!!e[Me]}function ee(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[Ie]||!!e.constructor[Ie]||ie(e)||ae(e))}function te(e,t,r){void 0===r&&(r=!1),0===re(e)?(r?Object.keys:qe)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function re(e){var t=e[Me];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:ie(e)?2:ae(e)?3:0}function ne(e,t){return 2===re(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function oe(e,t,r){var n=re(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function ie(e){return Ce&&e instanceof Map}function ae(e){return Be&&e instanceof Set}function se(e){return e.o||e.t}function ue(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Le(e);delete t[Me];for(var r=qe(t),n=0;n<r.length;n++){var o=r[n],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function ce(e,t){return void 0===t&&(t=!1),le(e)||Q(e)||!ee(e)||(re(e)>1&&(e.set=e.add=e.clear=e.delete=fe),Object.freeze(e),t&&te(e,(function(e,t){return ce(t,!0)}),!0)),e}function fe(){H(2)}function le(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function de(e){var t=ze[e];return t||H(18,e),t}function he(){return De}function ve(e,t){t&&(de("Patches"),e.u=[],e.s=[],e.v=t)}function pe(e){ge(e),e.p.forEach(me),e.p=null}function ge(e){e===De&&(De=e.l)}function ye(e){return De={p:[],l:De,h:e,m:!0,_:0}}function me(e){var t=e[Me];0===t.i||1===t.i?t.j():t.g=!0}function be(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.O||de("ES5").S(t,e,n),n?(r[Me].P&&(pe(t),H(4)),ee(e)&&(e=we(t,e),t.l||Oe(t,e)),t.u&&de("Patches").M(r[Me],e,t.u,t.s)):e=we(t,r,[]),pe(t),t.u&&t.v(t.u,t.s),e!==Te?e:void 0}function we(e,t,r){if(le(t))return t;var n=t[Me];if(!n)return te(t,(function(o,i){return xe(e,n,t,o,i,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return Oe(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=ue(n.k):n.o;te(3===n.i?new Set(o):o,(function(t,i){return xe(e,n,o,t,i,r)})),Oe(e,o,!1),r&&e.u&&de("Patches").R(n,r,e.u,e.s)}return n.o}function xe(e,t,r,n,o,i){if(Q(o)){var a=we(e,o,i&&t&&3!==t.i&&!ne(t.D,n)?i.concat(n):void 0);if(oe(r,n,a),!Q(a))return;e.m=!1}if(ee(o)&&!le(o)){if(!e.h.N&&e._<1)return;we(e,o),t&&t.A.l||Oe(e,o)}}function Oe(e,t,r){void 0===r&&(r=!1),e.h.N&&e.m&&ce(t,r)}function Pe(e,t){var r=e[Me];return(r?se(r):e)[t]}function Ae(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function ke(e){e.P||(e.P=!0,e.l&&ke(e.l))}function je(e){e.o||(e.o=ue(e.t))}function Ee(e,t,r){var n=ie(t)?de("MapSet").T(t,r):ae(t)?de("MapSet").F(t,r):e.O?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:he(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=n,i=We;r&&(o=[n],i=Ve);var a=Proxy.revocable(o,i),s=a.revoke,u=a.proxy;return n.k=u,n.j=s,u}(t,r):de("ES5").J(t,r);return(r?r.A:he()).p.push(n),n}function Fe(e){return Q(e)||H(22,e),function e(t){if(!ee(t))return t;var r,n=t[Me],o=re(t);if(n){if(!n.P&&(n.i<4||!de("ES5").K(n)))return n.t;n.I=!0,r=Se(t,o),n.I=!1}else r=Se(t,o);return te(r,(function(t,o){n&&function(e,t){return 2===re(e)?e.get(t):e[t]}(n.t,t)===o||oe(r,t,e(o))})),3===o?new Set(r):r}(e)}function Se(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ue(e)}var _e,De,Ne="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Ce="undefined"!=typeof Map,Be="undefined"!=typeof Set,Re="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Te=Ne?Symbol.for("immer-nothing"):((_e={})["immer-nothing"]=!0,_e),Ie=Ne?Symbol.for("immer-draftable"):"__$immer_draftable",Me=Ne?Symbol.for("immer-state"):"__$immer_state",qe="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Le=Object.getOwnPropertyDescriptors||function(e){var t={};return qe(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},ze={},We={get:function(e,t){if(t===Me)return e;var r=se(e);if(!ne(r,t))return function(e,t,r){var n,o=Ae(t,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!ee(n)?n:n===Pe(e.t,t)?(je(e),e.o[t]=Ee(e.A.h,n,e)):n},has:function(e,t){return t in se(e)},ownKeys:function(e){return Reflect.ownKeys(se(e))},set:function(e,t,r){var n=Ae(se(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var o=Pe(se(e),t),i=null==o?void 0:o[Me];if(i&&i.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,o)&&(void 0!==r||ne(e.t,t)))return!0;je(e),ke(e)}return e.o[t]=r,e.D[t]=!0,!0},deleteProperty:function(e,t){return void 0!==Pe(e.t,t)||t in e.t?(e.D[t]=!1,je(e),ke(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=se(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){H(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){H(12)}},Ve={};te(We,(function(e,t){Ve[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Ve.deleteProperty=function(e,t){return We.deleteProperty.call(this,e[0],t)},Ve.set=function(e,t,r){return We.set.call(this,e[0],t,r,e[0])};var Ue=new(function(){function e(e){this.O=Re,this.N=!0,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var t=e.prototype;return t.produce=function(e,t,r){if("function"==typeof e&&"function"!=typeof t){var n=t;t=e;var o=this;return function(e){var r=this;void 0===e&&(e=n);for(var i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return o.produce(e,(function(e){var n;return(n=t).call.apply(n,[r,e].concat(a))}))}}var i;if("function"!=typeof t&&H(6),void 0!==r&&"function"!=typeof r&&H(7),ee(e)){var a=ye(this),s=Ee(this,e,void 0),u=!0;try{i=t(s),u=!1}finally{u?pe(a):ge(a)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return ve(a,r),be(e,a)}),(function(e){throw pe(a),e})):(ve(a,r),be(i,a))}if(!e||"object"!=typeof e){if((i=t(e))===Te)return;return void 0===i&&(i=e),this.N&&ce(i,!0),i}H(21,e)},t.produceWithPatches=function(e,t){var r,n,o=this;return"function"==typeof e?function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(n))}))}:[this.produce(e,t,(function(e,t){r=e,n=t})),r,n]},t.createDraft=function(e){ee(e)||H(8),Q(e)&&(e=Fe(e));var t=ye(this),r=Ee(this,e,void 0);return r[Me].C=!0,ge(t),r},t.finishDraft=function(e,t){var r=(e&&e[Me]).A;return ve(r,t),be(void 0,r)},t.setAutoFreeze=function(e){this.N=e},t.setUseProxies=function(e){e&&!Re&&H(20),this.O=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}var o=de("Patches").$;return Q(e)?o(e,t):this.produce(e,(function(e){return o(e,t.slice(r+1))}))},e}()),$e=Ue.produce,Je=(Ue.produceWithPatches.bind(Ue),Ue.setAutoFreeze.bind(Ue),Ue.setUseProxies.bind(Ue),Ue.applyPatches.bind(Ue),Ue.createDraft.bind(Ue)),Ge=Ue.finishDraft.bind(Ue);function Ke(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ye(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ze=new WeakMap,Xe={ancestor:function(e,t){var r=Xe.get(e,t);if(pt.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(r));return r},ancestors:F.mark((function e(t,r){var n,o,i,a,s,u,c=arguments;return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>2&&void 0!==c[2]?c[2]:{},o=Ke(tt.ancestors(r,n)),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=12;break}return a=i.value,s=Xe.ancestor(t,a),u=[s,a],e.next=10,u;case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),o.e(e.t0);case 17:return e.prev=17,o.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})),child:function(e,t){if(pt.isText(e))throw new Error("Cannot get the child of a text node: ".concat(JSON.stringify(e)));var r=e.children[t];if(null==r)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(JSON.stringify(e)));return r},children:F.mark((function(e,t){var r,n,o,i,a,s,u,c,f=arguments;return F.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:r=f.length>2&&void 0!==f[2]?f[2]:{},n=r.reverse,o=void 0!==n&&n,i=Xe.ancestor(e,t),a=i.children,s=o?a.length-1:0;case 5:if(!(o?s>=0:s<a.length)){l.next=13;break}return u=Xe.child(i,s),c=t.concat(s),l.next=10,[u,c];case 10:s=o?s-1:s+1,l.next=5;break;case 13:case"end":return l.stop()}}),a)})),common:function(e,t,r){var n=tt.common(t,r);return[Xe.get(e,n),n]},descendant:function(e,t){var r=Xe.get(e,t);if(Y.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(r));return r},descendants:F.mark((function e(t){var r,n,o,i,a,s,u=arguments;return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>1&&void 0!==u[1]?u[1]:{},n=Ke(Xe.nodes(t,r)),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=11;break}if(i=h(o.value,2),a=i[0],0===(s=i[1]).length){e.next=9;break}return e.next=9,[a,s];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),elements:F.mark((function e(t){var r,n,o,i,a,s,u=arguments;return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>1&&void 0!==u[1]?u[1]:{},n=Ke(Xe.nodes(t,r)),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=11;break}if(i=h(o.value,2),a=i[0],s=i[1],!V.isElement(a)){e.next=9;break}return e.next=9,[a,s];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),extractProps:function(e){if(V.isAncestor(e)){e.children;return E(e,["children"])}e.text;return E(e,["text"])},first:function(e,t){for(var r=t.slice(),n=Xe.get(e,r);n&&!pt.isText(n)&&0!==n.children.length;)n=n.children[0],r.push(0);return[n,r]},fragment:function(e,t){if(pt.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(JSON.stringify(e)));return $e({children:e.children},(function(e){var r,n=ut.edges(t),o=h(n,2),i=o[0],a=o[1],s=Ke(Xe.nodes(e,{reverse:!0,pass:function(e){var r=h(e,2)[1];return!ut.includes(t,r)}}));try{for(s.s();!(r=s.n()).done;){var u=h(r.value,2)[1];if(!ut.includes(t,u)){var c=Xe.parent(e,u),f=u[u.length-1];c.children.splice(f,1)}if(tt.equals(u,a.path)){var l=Xe.leaf(e,u);l.text=l.text.slice(0,a.offset)}if(tt.equals(u,i.path)){var d=Xe.leaf(e,u);d.text=d.text.slice(i.offset)}}}catch(e){s.e(e)}finally{s.f()}Y.isEditor(e)&&(e.selection=null)})).children},get:function(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(pt.isText(r)||!r.children[o])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(JSON.stringify(e)));r=r.children[o]}return r},has:function(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(pt.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode:function(e){return pt.isText(e)||V.isElement(e)||Y.isEditor(e)},isNodeList:function(e){if(!Array.isArray(e))return!1;var t=Ze.get(e);if(void 0!==t)return t;var r=e.every((function(e){return Xe.isNode(e)}));return Ze.set(e,r),r},last:function(e,t){for(var r=t.slice(),n=Xe.get(e,r);n&&!pt.isText(n)&&0!==n.children.length;){var o=n.children.length-1;n=n.children[o],r.push(o)}return[n,r]},leaf:function(e,t){var r=Xe.get(e,t);if(!pt.isText(r))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(r));return r},levels:F.mark((function e(t,r){var n,o,i,a,s,u=arguments;return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=u.length>2&&void 0!==u[2]?u[2]:{},o=Ke(tt.levels(r,n)),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=11;break}return a=i.value,s=Xe.get(t,a),e.next=9,[s,a];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),o.e(e.t0);case 16:return e.prev=16,o.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),matches:function(e,t){return V.isElement(e)&&V.isElementProps(t)&&V.matches(e,t)||pt.isText(e)&&pt.isTextProps(t)&&pt.matches(e,t)},nodes:F.mark((function e(t){var r,n,o,i,a,s,u,c,f,l,d,h,v,p=arguments;return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=p.length>1&&void 0!==p[1]?p[1]:{},n=r.pass,o=r.reverse,i=void 0!==o&&o,a=r.from,s=void 0===a?[]:a,u=r.to,c=new Set,f=[],l=t;case 6:if(!u||!(i?tt.isBefore(f,u):tt.isAfter(f,u))){e.next=9;break}return e.abrupt("break",37);case 9:if(c.has(l)){e.next=12;break}return e.next=12,[l,f];case 12:if(c.has(l)||pt.isText(l)||0===l.children.length||null!=n&&!1!==n([l,f])){e.next=19;break}return c.add(l),d=i?l.children.length-1:0,tt.isAncestor(f,s)&&(d=s[f.length]),f=f.concat(d),l=Xe.get(t,f),e.abrupt("continue",6);case 19:if(0!==f.length){e.next=21;break}return e.abrupt("break",37);case 21:if(i){e.next=27;break}if(h=tt.next(f),!Xe.has(t,h)){e.next=27;break}return f=h,l=Xe.get(t,f),e.abrupt("continue",6);case 27:if(!i||0===f[f.length-1]){e.next=32;break}return v=tt.previous(f),f=v,l=Xe.get(t,f),e.abrupt("continue",6);case 32:f=tt.parent(f),l=Xe.get(t,f),c.add(l),e.next=6;break;case 37:case"end":return e.stop()}}),e)})),parent:function(e,t){var r=tt.parent(t),n=Xe.get(e,r);if(pt.isText(n))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return n},string:function(e){return pt.isText(e)?e.text:e.children.map(Xe.string).join("")},texts:F.mark((function e(t){var r,n,o,i,a,s,u=arguments;return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>1&&void 0!==u[1]?u[1]:{},n=Ke(Xe.nodes(t,r)),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=11;break}if(i=h(o.value,2),a=i[0],s=i[1],!pt.isText(a)){e.next=9;break}return e.next=9,[a,s];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))};function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var et={isNodeOperation:function(e){return et.isOperation(e)&&e.type.endsWith("_node")},isOperation:function(e){if(!_(e))return!1;switch(e.type){case"insert_node":return tt.isPath(e.path)&&Xe.isNode(e.node);case"insert_text":return"number"==typeof e.offset&&"string"==typeof e.text&&tt.isPath(e.path);case"merge_node":return"number"==typeof e.position&&tt.isPath(e.path)&&_(e.properties);case"move_node":return tt.isPath(e.path)&&tt.isPath(e.newPath);case"remove_node":return tt.isPath(e.path)&&Xe.isNode(e.node);case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&tt.isPath(e.path);case"set_node":return tt.isPath(e.path)&&_(e.properties)&&_(e.newProperties);case"set_selection":return null===e.properties&&ut.isRange(e.newProperties)||null===e.newProperties&&ut.isRange(e.properties)||_(e.properties)&&_(e.newProperties);case"split_node":return tt.isPath(e.path)&&"number"==typeof e.position&&_(e.properties);default:return!1}},isOperationList:function(e){return Array.isArray(e)&&e.every((function(e){return et.isOperation(e)}))},isSelectionOperation:function(e){return et.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation:function(e){return et.isOperation(e)&&e.type.endsWith("_text")},inverse:function(e){switch(e.type){case"insert_node":return Qe(Qe({},e),{},{type:"remove_node"});case"insert_text":return Qe(Qe({},e),{},{type:"remove_text"});case"merge_node":return Qe(Qe({},e),{},{type:"split_node",path:tt.previous(e.path)});case"move_node":var t=e.newPath,r=e.path;if(tt.equals(t,r))return e;if(tt.isSibling(r,t))return Qe(Qe({},e),{},{path:t,newPath:r});var n=tt.transform(r,e),o=tt.transform(tt.next(r),e);return Qe(Qe({},e),{},{path:n,newPath:o});case"remove_node":return Qe(Qe({},e),{},{type:"insert_node"});case"remove_text":return Qe(Qe({},e),{},{type:"insert_text"});case"set_node":var i=e.properties,a=e.newProperties;return Qe(Qe({},e),{},{properties:a,newProperties:i});case"set_selection":var s=e.properties,u=e.newProperties;return Qe(Qe({},e),{},null==s?{properties:u,newProperties:null}:null==u?{properties:null,newProperties:s}:{properties:u,newProperties:s});case"split_node":return Qe(Qe({},e),{},{type:"merge_node",path:tt.next(e.path)})}}},tt={ancestors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=tt.levels(e,t);return o=n?o.slice(1):o.slice(0,-1)},common:function(e,t){for(var r=[],n=0;n<e.length&&n<t.length;n++){var o=e[n];if(o!==t[n])break;r.push(o)}return r},compare:function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},endsAfter:function(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),i=e[r],a=t[r];return tt.equals(n,o)&&i>a},endsAt:function(e,t){var r=e.length,n=e.slice(0,r),o=t.slice(0,r);return tt.equals(n,o)},endsBefore:function(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),i=e[r],a=t[r];return tt.equals(n,o)&&i<a},equals:function(e,t){return e.length===t.length&&e.every((function(e,r){return e===t[r]}))},hasPrevious:function(e){return e[e.length-1]>0},isAfter:function(e,t){return 1===tt.compare(e,t)},isAncestor:function(e,t){return e.length<t.length&&0===tt.compare(e,t)},isBefore:function(e,t){return-1===tt.compare(e,t)},isChild:function(e,t){return e.length===t.length+1&&0===tt.compare(e,t)},isCommon:function(e,t){return e.length<=t.length&&0===tt.compare(e,t)},isDescendant:function(e,t){return e.length>t.length&&0===tt.compare(e,t)},isParent:function(e,t){return e.length+1===t.length&&0===tt.compare(e,t)},isPath:function(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])},isSibling:function(e,t){if(e.length!==t.length)return!1;var r=e.slice(0,-1),n=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&tt.equals(r,n)},levels:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=[],i=0;i<=e.length;i++)o.push(e.slice(0,i));return n&&o.reverse(),o},next:function(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},parent:function(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous:function(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative:function(e,t){if(!tt.isAncestor(t,e)&&!tt.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $e(e,(function(n){var o=r.affinity,i=void 0===o?"forward":o;if(0!==e.length)switch(t.type){case"insert_node":var a=t.path;(tt.equals(a,n)||tt.endsBefore(a,n)||tt.isAncestor(a,n))&&(n[a.length-1]+=1);break;case"remove_node":var s=t.path;if(tt.equals(s,n)||tt.isAncestor(s,n))return null;tt.endsBefore(s,n)&&(n[s.length-1]-=1);break;case"merge_node":var u=t.path,c=t.position;tt.equals(u,n)||tt.endsBefore(u,n)?n[u.length-1]-=1:tt.isAncestor(u,n)&&(n[u.length-1]-=1,n[u.length]+=c);break;case"split_node":var f=t.path,l=t.position;if(tt.equals(f,n)){if("forward"===i)n[n.length-1]+=1;else if("backward"!==i)return null}else tt.endsBefore(f,n)?n[f.length-1]+=1:tt.isAncestor(f,n)&&e[f.length]>=l&&(n[f.length-1]+=1,n[f.length]-=l);break;case"move_node":var d=t.path,h=t.newPath;if(tt.equals(d,h))return;if(tt.isAncestor(d,n)||tt.equals(d,n)){var v=h.slice();return tt.endsBefore(d,h)&&d.length<h.length&&(v[d.length-1]-=1),v.concat(n.slice(d.length))}tt.isSibling(d,h)&&(tt.isAncestor(h,n)||tt.equals(h,n))?tt.endsBefore(d,n)?n[d.length-1]-=1:n[d.length-1]+=1:tt.endsBefore(h,n)||tt.equals(h,n)||tt.isAncestor(h,n)?(tt.endsBefore(d,n)&&(n[d.length-1]-=1),n[h.length-1]+=1):tt.endsBefore(d,n)&&(tt.equals(h,n)&&(n[h.length-1]+=1),n[d.length-1]-=1)}}))}},rt={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=tt.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var it={compare:function(e,t){var r=tt.compare(e.path,t.path);return 0===r?e.offset<t.offset?-1:e.offset>t.offset?1:0:r},isAfter:function(e,t){return 1===it.compare(e,t)},isBefore:function(e,t){return-1===it.compare(e,t)},equals:function(e,t){return e.offset===t.offset&&tt.equals(e.path,t.path)},isPoint:function(e){return _(e)&&"number"==typeof e.offset&&tt.isPath(e.path)},transform:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return $e(e,(function(e){var n=r.affinity,o=void 0===n?"forward":n,i=e.path,a=e.offset;switch(t.type){case"insert_node":case"move_node":e.path=tt.transform(i,t,r);break;case"insert_text":tt.equals(t.path,i)&&t.offset<=a&&(e.offset+=t.text.length);break;case"merge_node":tt.equals(t.path,i)&&(e.offset+=t.position),e.path=tt.transform(i,t,r);break;case"remove_text":tt.equals(t.path,i)&&t.offset<=a&&(e.offset-=Math.min(a-t.offset,t.text.length));break;case"remove_node":if(tt.equals(t.path,i)||tt.isAncestor(t.path,i))return null;e.path=tt.transform(i,t,r);break;case"split_node":if(tt.equals(t.path,i)){if(t.position===a&&null==o)return null;(t.position<a||t.position===a&&"forward"===o)&&(e.offset-=t.position,e.path=tt.transform(i,t,ot(ot({},r),{},{affinity:"forward"})))}else e.path=tt.transform(i,t,r)}}))}},at={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=it.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function st(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ut={edges:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reverse,n=void 0!==r&&r,o=e.anchor,i=e.focus;return ut.isBackward(e)===n?[o,i]:[i,o]},end:function(e){var t=ut.edges(e),r=h(t,2)[1];return r},equals:function(e,t){return it.equals(e.anchor,t.anchor)&&it.equals(e.focus,t.focus)},includes:function(e,t){if(ut.isRange(t)){if(ut.includes(e,t.anchor)||ut.includes(e,t.focus))return!0;var r=ut.edges(e),n=h(r,2),o=n[0],i=n[1],a=ut.edges(t),s=h(a,2),u=s[0],c=s[1];return it.isBefore(o,u)&&it.isAfter(i,c)}var f=ut.edges(e),l=h(f,2),d=l[0],v=l[1],p=!1,g=!1;return it.isPoint(t)?(p=it.compare(t,d)>=0,g=it.compare(t,v)<=0):(p=tt.compare(t,d.path)>=0,g=tt.compare(t,v.path)<=0),p&&g},intersection:function(e,t){e.anchor,e.focus;var r=E(e,["anchor","focus"]),n=ut.edges(e),o=h(n,2),i=o[0],a=o[1],s=ut.edges(t),u=h(s,2),c=u[0],f=u[1],l=it.isBefore(i,c)?c:i,d=it.isBefore(a,f)?a:f;return it.isBefore(d,l)?null:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?st(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({anchor:l,focus:d},r)},isBackward:function(e){var t=e.anchor,r=e.focus;return it.isAfter(t,r)},isCollapsed:function(e){var t=e.anchor,r=e.focus;return it.equals(t,r)},isExpanded:function(e){return!ut.isCollapsed(e)},isForward:function(e){return!ut.isBackward(e)},isRange:function(e){return _(e)&&it.isPoint(e.anchor)&&it.isPoint(e.focus)},points:F.mark((function e(t){return F.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[t.anchor,"anchor"];case 2:return e.next=4,[t.focus,"focus"];case 4:case"end":return e.stop()}}),e)})),start:function(e){var t=ut.edges(e),r=h(t,1)[0];return r},transform:function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.affinity,a=void 0===i?"inward":i;return"inward"===a?ut.isForward(e)?(r="forward",n="backward"):(r="backward",n="forward"):"outward"===a?ut.isForward(e)?(r="backward",n="forward"):(r="forward",n="backward"):(r=a,n=a),$e(e,(function(e){var o=it.transform(e.anchor,t,{affinity:r}),i=it.transform(e.focus,t,{affinity:n});if(!o||!i)return null;e.anchor=o,e.focus=i}))}},ct={transform:function(e,t){var r=e.current,n=e.affinity;if(null!=r){var o=ut.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}},ft=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!=o--;){var a=i[o];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r};function lt(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pt={equals:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.loose,o=void 0!==n&&n;function i(e){e.text;return E(e,["text"])}return ft(o?i(e):e,o?i(t):t)},isText:function(e){return _(e)&&"string"==typeof e.text},isTextList:function(e){return Array.isArray(e)&&e.every((function(e){return pt.isText(e)}))},isTextProps:function(e){return void 0!==e.text},matches:function(e,t){for(var r in t)if("text"!==r&&(!e.hasOwnProperty(r)||e[r]!==t[r]))return!1;return!0},decorations:function(e,t){var r,n=[vt({},e)],o=lt(t);try{for(o.s();!(r=o.n()).done;){var i,a=r.value,s=(a.anchor,a.focus,E(a,["anchor","focus"])),u=ut.edges(a),c=h(u,2),f=c[0],l=c[1],d=[],v=0,p=lt(n);try{for(p.s();!(i=p.n()).done;){var g=i.value,y=g.text.length,m=v;if(v+=y,f.offset<=m&&l.offset>=v)Object.assign(g,s),d.push(g);else if(f.offset!==l.offset&&(f.offset===v||l.offset===m)||f.offset>v||l.offset<m||l.offset===m&&0!==m)d.push(g);else{var b=g,w=void 0,x=void 0;if(l.offset<v){var O=l.offset-m;x=vt(vt({},b),{},{text:b.text.slice(O)}),b=vt(vt({},b),{},{text:b.text.slice(0,O)})}if(f.offset>m){var P=f.offset-m;w=vt(vt({},b),{},{text:b.text.slice(0,P)}),b=vt(vt({},b),{},{text:b.text.slice(P)})}Object.assign(b,s),w&&d.push(w),d.push(b),x&&d.push(x)}}}catch(e){p.e(e)}finally{p.f()}n=d}}catch(e){o.e(e)}finally{o.f()}return n}};function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mt(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return bt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ot(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var At={insertNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Y.withoutNormalizing(e,(function(){var n=r.hanging,o=void 0!==n&&n,i=r.voids,a=void 0!==i&&i,s=r.mode,u=void 0===s?"lowest":s,c=r.at,f=r.match,l=r.select;if(Xe.isNode(t)&&(t=[t]),0!==t.length){var d=h(t,1)[0];if(c||(c=e.selection?e.selection:e.children.length>0?Y.end(e,[]):[0],l=!0),null==l&&(l=!1),ut.isRange(c))if(o||(c=Y.unhangRange(e,c)),ut.isCollapsed(c))c=c.anchor;else{var v=ut.edges(c),p=h(v,2)[1],g=Y.pointRef(e,p);Tt.delete(e,{at:c}),c=g.unref()}if(it.isPoint(c)){null==f&&(f=pt.isText(d)?function(e){return pt.isText(e)}:e.isInline(d)?function(t){return pt.isText(t)||Y.isInline(e,t)}:function(t){return Y.isBlock(e,t)});var y=Y.nodes(e,{at:c.path,match:f,mode:u,voids:a}),m=h(y,1)[0];if(!m)return;var b=h(m,2)[1],w=Y.pathRef(e,b),x=Y.isEnd(e,c,b);Tt.splitNodes(e,{at:c,match:f,mode:u,voids:a});var O=w.unref();c=x?tt.next(O):O}var P=tt.parent(c),A=c[c.length-1];if(a||!Y.void(e,{at:P})){var k,j=Ot(t);try{for(j.s();!(k=j.n()).done;){var E=k.value,F=P.concat(A);A++,e.apply({type:"insert_node",path:F,node:E})}}catch(e){j.e(e)}finally{j.f()}if(l){var S=Y.end(e,c);S&&Tt.select(e,S)}}}}))},liftNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Y.withoutNormalizing(e,(function(){var r=t.at,n=void 0===r?e.selection:r,o=t.mode,i=void 0===o?"lowest":o,a=t.voids,s=void 0!==a&&a,u=t.match;if(null==u&&(u=tt.isPath(n)?Et(e,n):function(t){return Y.isBlock(e,t)}),n)for(var c=Y.nodes(e,{at:n,match:u,mode:i,voids:s}),f=0,l=Array.from(c,(function(t){var r=h(t,2)[1];return Y.pathRef(e,r)}));f<l.length;f++){var d=l[f].unref();if(d.length<2)throw new Error("Cannot lift node at a path [".concat(d,"] because it has a depth of less than `2`."));var v=Y.node(e,tt.parent(d)),p=h(v,2),g=p[0],y=p[1],m=d[d.length-1],b=g.children.length;if(1===b){var w=tt.next(y);Tt.moveNodes(e,{at:d,to:w,voids:s}),Tt.removeNodes(e,{at:y,voids:s})}else if(0===m)Tt.moveNodes(e,{at:d,to:y,voids:s});else if(m===b-1){var x=tt.next(y);Tt.moveNodes(e,{at:d,to:x,voids:s})}else{var O=tt.next(d),P=tt.next(y);Tt.splitNodes(e,{at:O,voids:s}),Tt.moveNodes(e,{at:d,to:P,voids:s})}}}))},mergeNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Y.withoutNormalizing(e,(function(){var r=t.match,n=t.at,o=void 0===n?e.selection:n,i=t.hanging,a=void 0!==i&&i,s=t.voids,u=void 0!==s&&s,c=t.mode,f=void 0===c?"lowest":c;if(o){if(null==r)if(tt.isPath(o)){var l=Y.parent(e,o),d=h(l,1)[0];r=function(e){return d.children.includes(e)}}else r=function(t){return Y.isBlock(e,t)};if(!a&&ut.isRange(o)&&(o=Y.unhangRange(e,o)),ut.isRange(o))if(ut.isCollapsed(o))o=o.anchor;else{var v=ut.edges(o),p=h(v,2)[1],g=Y.pointRef(e,p);Tt.delete(e,{at:o}),o=g.unref(),null==t.at&&Tt.select(e,o)}var y=Y.nodes(e,{at:o,match:r,voids:u,mode:f}),m=h(y,1)[0],b=Y.previous(e,{at:o,match:r,voids:u,mode:f});if(m&&b){var w=h(m,2),x=w[0],O=w[1],P=h(b,2),A=P[0],k=P[1];if(0!==O.length&&0!==k.length){var j,F,S=tt.next(k),_=tt.common(O,k),D=tt.isSibling(O,k),N=Array.from(Y.levels(e,{at:O}),(function(e){return h(e,1)[0]})).slice(_.length).slice(0,-1),C=Y.above(e,{at:O,mode:"highest",match:function(t){return N.includes(t)&&kt(e,t)}}),B=C&&Y.pathRef(e,C[1]);if(pt.isText(x)&&pt.isText(A)){x.text;var R=E(x,["text"]);F=A.text.length,j=R}else{if(!V.isElement(x)||!V.isElement(A))throw new Error("Cannot merge the node at path [".concat(O,"] with the previous sibling because it is not the same kind: ").concat(JSON.stringify(x)," ").concat(JSON.stringify(A)));x.children;var T=E(x,["children"]);F=A.children.length,j=T}D||Tt.moveNodes(e,{at:O,to:S,voids:u}),B&&Tt.removeNodes(e,{at:B.current,voids:u}),V.isElement(A)&&Y.isEmpty(e,A)||pt.isText(A)&&""===A.text&&0!==k[k.length-1]?Tt.removeNodes(e,{at:k,voids:u}):e.apply({type:"merge_node",path:S,position:F,properties:j}),B&&B.unref()}}}}))},moveNodes:function(e,t){Y.withoutNormalizing(e,(function(){var r=t.to,n=t.at,o=void 0===n?e.selection:n,i=t.mode,a=void 0===i?"lowest":i,s=t.voids,u=void 0!==s&&s,c=t.match;if(o){null==c&&(c=tt.isPath(o)?Et(e,o):function(t){return Y.isBlock(e,t)});for(var f=Y.pathRef(e,r),l=Y.nodes(e,{at:o,match:c,mode:a,voids:u}),d=0,v=Array.from(l,(function(t){var r=h(t,2)[1];return Y.pathRef(e,r)}));d<v.length;d++){var p=v[d].unref(),g=f.current;0!==p.length&&e.apply({type:"move_node",path:p,newPath:g}),f.current&&tt.isSibling(g,p)&&tt.isAfter(g,p)&&(f.current=tt.next(f.current))}f.unref()}}))},removeNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Y.withoutNormalizing(e,(function(){var r=t.hanging,n=void 0!==r&&r,o=t.voids,i=void 0!==o&&o,a=t.mode,s=void 0===a?"lowest":a,u=t.at,c=void 0===u?e.selection:u,f=t.match;if(c){null==f&&(f=tt.isPath(c)?Et(e,c):function(t){return Y.isBlock(e,t)}),!n&&ut.isRange(c)&&(c=Y.unhangRange(e,c));for(var l=Y.nodes(e,{at:c,match:f,mode:s,voids:i}),d=0,v=Array.from(l,(function(t){var r=h(t,2)[1];return Y.pathRef(e,r)}));d<v.length;d++){var p=v[d].unref();if(p){var g=Y.node(e,p),y=h(g,1)[0];e.apply({type:"remove_node",path:p,node:y})}}}}))},setNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Y.withoutNormalizing(e,(function(){var n=r.match,o=r.at,i=void 0===o?e.selection:o,a=r.hanging,s=void 0!==a&&a,u=r.mode,c=void 0===u?"lowest":u,f=r.split,l=void 0!==f&&f,d=r.voids,v=void 0!==d&&d;if(i){if(null==n&&(n=tt.isPath(i)?Et(e,i):function(t){return Y.isBlock(e,t)}),!s&&ut.isRange(i)&&(i=Y.unhangRange(e,i)),l&&ut.isRange(i)){var p=Y.rangeRef(e,i,{affinity:"inward"}),g=ut.edges(i),y=h(g,2),m=y[0],b=y[1],w="lowest"===c?"lowest":"highest",x=Y.isEnd(e,b,b.path);Tt.splitNodes(e,{at:b,match:n,mode:w,voids:v,always:!x});var O=Y.isStart(e,m,m.path);Tt.splitNodes(e,{at:m,match:n,mode:w,voids:v,always:!O}),i=p.unref(),null==r.at&&Tt.select(e,i)}var P,A=Ot(Y.nodes(e,{at:i,match:n,mode:c,voids:v}));try{for(A.s();!(P=A.n()).done;){var k=h(P.value,2),j=k[0],E=k[1],F={},S={};if(0!==E.length){for(var _ in t)"children"!==_&&"text"!==_&&t[_]!==j[_]&&(j.hasOwnProperty(_)&&(F[_]=j[_]),S[_]=t[_]);0!==Object.keys(S).length&&e.apply({type:"set_node",path:E,properties:F,newProperties:S})}}}catch(e){A.e(e)}finally{A.f()}}}))},splitNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Y.withoutNormalizing(e,(function(){var r=t.mode,n=void 0===r?"lowest":r,o=t.voids,i=void 0!==o&&o,a=t.match,s=t.at,u=void 0===s?e.selection:s,c=t.height,f=void 0===c?0:c,l=t.always,d=void 0!==l&&l;if(null==a&&(a=function(t){return Y.isBlock(e,t)}),ut.isRange(u)&&(u=jt(e,u)),tt.isPath(u)){var v=u,p=Y.point(e,v),g=Y.parent(e,v),y=h(g,1)[0];a=function(e){return e===y},f=p.path.length-v.length+1,u=p,d=!0}if(u){var m=Y.pointRef(e,u,{affinity:"backward"}),b=Y.nodes(e,{at:u,match:a,mode:n,voids:i}),w=h(b,1)[0];if(w){var x=Y.void(e,{at:u,mode:"highest"});if(!i&&x){var O=h(x,2),P=O[0],A=O[1];if(V.isElement(P)&&e.isInline(P)){var k=Y.after(e,A);if(!k){var j=tt.next(A);Tt.insertNodes(e,{text:""},{at:j,voids:i}),k=Y.point(e,j)}u=k,d=!0}f=u.path.length-A.length+1,d=!0}var E,F=Y.pointRef(e,u),S=u.path.length-f,_=h(w,2)[1],D=u.path.slice(0,S),N=0===f?u.offset:u.path[S]+0,C=Ot(Y.levels(e,{at:D,reverse:!0,voids:i}));try{for(C.s();!(E=C.n()).done;){var B=h(E.value,2),R=B[0],T=B[1],I=!1;if(T.length<_.length||0===T.length||!i&&Y.isVoid(e,R))break;var M=m.current,q=Y.isEnd(e,M,T);if(d||!m||!Y.isEdge(e,M,T)){I=!0;var L=Xe.extractProps(R);e.apply({type:"split_node",path:T,position:N,properties:L})}N=T[T.length-1]+(I||q?1:0)}}catch(e){C.e(e)}finally{C.f()}if(null==t.at){var z=F.current||Y.end(e,[]);Tt.select(e,z)}m.unref(),F.unref()}}}))},unsetNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var n,o={},i=Ot(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;o[a]=null}}catch(e){i.e(e)}finally{i.f()}Tt.setNodes(e,o,r)},unwrapNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Y.withoutNormalizing(e,(function(){var r=t.mode,n=void 0===r?"lowest":r,o=t.split,i=void 0!==o&&o,a=t.voids,s=void 0!==a&&a,u=t.at,c=void 0===u?e.selection:u,f=t.match;if(c){null==f&&(f=tt.isPath(c)?Et(e,c):function(t){return Y.isBlock(e,t)}),tt.isPath(c)&&(c=Y.range(e,c));for(var l=ut.isRange(c)?Y.rangeRef(e,c):null,d=Y.nodes(e,{at:c,match:f,mode:n,voids:s}),v=Array.from(d,(function(t){var r=h(t,2)[1];return Y.pathRef(e,r)})),p=function(){var t=y[g].unref(),r=Y.node(e,t),n=h(r,1)[0],o=Y.range(e,t);i&&l&&(o=ut.intersection(l.current,o)),Tt.liftNodes(e,{at:o,match:function(e){return V.isAncestor(n)&&n.children.includes(e)},voids:s})},g=0,y=v;g<y.length;g++)p();l&&l.unref()}}))},wrapNodes:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Y.withoutNormalizing(e,(function(){var n=r.mode,o=void 0===n?"lowest":n,i=r.split,a=void 0!==i&&i,s=r.voids,u=void 0!==s&&s,c=r.match,f=r.at,l=void 0===f?e.selection:f;if(l){if(null==c&&(c=tt.isPath(l)?Et(e,l):e.isInline(t)?function(t){return Y.isInline(e,t)||pt.isText(t)}:function(t){return Y.isBlock(e,t)}),a&&ut.isRange(l)){var d=ut.edges(l),v=h(d,2),p=v[0],g=v[1],y=Y.rangeRef(e,l,{affinity:"inward"});Tt.splitNodes(e,{at:g,match:c,voids:u}),Tt.splitNodes(e,{at:p,match:c,voids:u}),l=y.unref(),null==r.at&&Tt.select(e,l)}for(var m=0,b=Array.from(Y.nodes(e,{at:l,match:e.isInline(t)?function(t){return Y.isBlock(e,t)}:function(e){return Y.isEditor(e)},mode:"lowest",voids:u}));m<b.length;m++){var w=h(b[m],2)[1],x=ut.isRange(l)?ut.intersection(l,Y.range(e,w)):l;if(x){var O=Array.from(Y.nodes(e,{at:x,match:c,mode:o,voids:u}));if(O.length>0)if("continue"===function(){var r=h(O,1)[0],n=O[O.length-1],o=h(r,2)[1],i=h(n,2)[1];if(0===o.length&&0===i.length)return"continue";var a=tt.equals(o,i)?tt.parent(o):tt.common(o,i),s=Y.range(e,o,i),c=Y.node(e,a),f=h(c,1)[0],l=a.length+1,d=tt.next(i.slice(0,l)),v=xt(xt({},t),{},{children:[]});Tt.insertNodes(e,v,{at:d,voids:u}),Tt.moveNodes(e,{at:s,match:function(e){return V.isAncestor(f)&&f.children.includes(e)},to:d.concat(0),voids:u})}())continue}}}}))}},kt=function e(t,r){if(V.isElement(r)){var n=r;return!!Y.isVoid(t,r)||1===n.children.length&&e(t,n.children[0])}return!Y.isEditor(r)},jt=function(e,t){if(ut.isCollapsed(t))return t.anchor;var r=ut.edges(t),n=h(r,2)[1],o=Y.pointRef(e,n);return Tt.delete(e,{at:t}),o.unref()},Et=function(e,t){var r=Y.node(e,t),n=h(r,1)[0];return function(e){return e===n}};function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _t={collapse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.edge,n=void 0===r?"anchor":r,o=e.selection;if(o)if("anchor"===n)Tt.select(e,o.anchor);else if("focus"===n)Tt.select(e,o.focus);else if("start"===n){var i=ut.edges(o),a=h(i,1),s=a[0];Tt.select(e,s)}else if("end"===n){var u=ut.edges(o),c=h(u,2),f=c[1];Tt.select(e,f)}},deselect:function(e){var t=e.selection;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.selection,n=t.distance,o=void 0===n?1:n,i=t.unit,a=void 0===i?"character":i,s=t.reverse,u=void 0!==s&&s,c=t.edge,f=void 0===c?null:c;if(r){"start"===f&&(f=ut.isBackward(r)?"focus":"anchor"),"end"===f&&(f=ut.isBackward(r)?"anchor":"focus");var l=r.anchor,d=r.focus,h={distance:o,unit:a},v={};if(null==f||"anchor"===f){var p=u?Y.before(e,l,h):Y.after(e,l,h);p&&(v.anchor=p)}if(null==f||"focus"===f){var g=u?Y.before(e,d,h):Y.after(e,d,h);g&&(v.focus=g)}Tt.setSelection(e,v)}},select:function(e,t){var r=e.selection;if(t=Y.range(e,t),r)Tt.setSelection(e,t);else{if(!ut.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(JSON.stringify(t)));e.apply({type:"set_selection",properties:r,newProperties:t})}},setPoint:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.selection,o=r.edge,i=void 0===o?"both":o;if(n){"start"===i&&(i=ut.isBackward(n)?"focus":"anchor"),"end"===i&&(i=ut.isBackward(n)?"anchor":"focus");var a=n.anchor,s=n.focus,u="anchor"===i?a:s;Tt.setSelection(e,v({},"anchor"===i?"anchor":"focus",St(St({},u),t)))}},setSelection:function(e,t){var r=e.selection,n={},o={};if(r){for(var i in t)("anchor"===i&&null!=t.anchor&&!it.equals(t.anchor,r.anchor)||"focus"===i&&null!=t.focus&&!it.equals(t.focus,r.focus)||"anchor"!==i&&"focus"!==i&&t[i]!==r[i])&&(n[i]=r[i],o[i]=t[i]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:o})}}};function Dt(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ct={delete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Y.withoutNormalizing(e,(function(){var r=t.reverse,n=void 0!==r&&r,o=t.unit,i=void 0===o?"character":o,a=t.distance,s=void 0===a?1:a,u=t.voids,c=void 0!==u&&u,f=t.at,l=void 0===f?e.selection:f,d=t.hanging,v=void 0!==d&&d;if(l){if(ut.isRange(l)&&ut.isCollapsed(l)&&(l=l.anchor),it.isPoint(l)){var p=Y.void(e,{at:l,mode:"highest"});if(!c&&p){l=h(p,2)[1]}else{var g={unit:i,distance:s};l={anchor:l,focus:n?Y.before(e,l,g)||Y.start(e,[]):Y.after(e,l,g)||Y.end(e,[])},v=!0}}if(tt.isPath(l))Tt.removeNodes(e,{at:l,voids:c});else if(!ut.isCollapsed(l)){if(!v){var y=ut.edges(l),m=h(y,2)[1],b=Y.end(e,[]);it.equals(m,b)||(l=Y.unhangRange(e,l,{voids:c}))}var w=ut.edges(l),x=h(w,2),O=x[0],P=x[1],A=Y.above(e,{match:function(t){return Y.isBlock(e,t)},at:O,voids:c}),k=Y.above(e,{match:function(t){return Y.isBlock(e,t)},at:P,voids:c}),j=A&&k&&!tt.equals(A[1],k[1]),E=tt.equals(O.path,P.path),F=c?null:Y.void(e,{at:O,mode:"highest"}),S=c?null:Y.void(e,{at:P,mode:"highest"});if(F){var _=Y.before(e,O);_&&A&&tt.isAncestor(A[1],_.path)&&(O=_)}if(S){var D=Y.after(e,P);D&&k&&tt.isAncestor(k[1],D.path)&&(P=D)}var N,C,B=[],R=Dt(Y.nodes(e,{at:l,voids:c}));try{for(R.s();!(C=R.n()).done;){var T=C.value,I=h(T,2),M=I[0],q=I[1];N&&0===tt.compare(q,N)||(!c&&Y.isVoid(e,M)||!tt.isCommon(q,O.path)&&!tt.isCommon(q,P.path))&&(B.push(T),N=q)}}catch(e){R.e(e)}finally{R.f()}var L=Array.from(B,(function(t){var r=h(t,2)[1];return Y.pathRef(e,r)})),z=Y.pointRef(e,O),W=Y.pointRef(e,P);if(!E&&!F){var V=z.current,U=Y.leaf(e,V),$=h(U,1)[0],J=V.path,G=O.offset,K=$.text.slice(G);K.length>0&&e.apply({type:"remove_text",path:J,offset:G,text:K})}for(var Z=0,X=L;Z<X.length;Z++){var H=X[Z].unref();Tt.removeNodes(e,{at:H,voids:c})}if(!S){var Q=W.current,ee=Y.leaf(e,Q),te=h(ee,1)[0],re=Q.path,ne=E?O.offset:0,oe=te.text.slice(ne,P.offset);oe.length>0&&e.apply({type:"remove_text",path:re,offset:ne,text:oe})}!E&&j&&W.current&&z.current&&Tt.mergeNodes(e,{at:W.current,hanging:!0,voids:c});var ie=n?z.unref()||W.unref():W.unref()||z.unref();null==t.at&&ie&&Tt.select(e,ie)}}}))},insertFragment:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Y.withoutNormalizing(e,(function(){var n=r.hanging,o=void 0!==n&&n,i=r.voids,a=void 0!==i&&i,s=r.at,u=void 0===s?e.selection:s;if(t.length&&u){if(ut.isRange(u))if(o||(u=Y.unhangRange(e,u)),ut.isCollapsed(u))u=u.anchor;else{var c=ut.edges(u),f=h(c,2)[1];if(!a&&Y.void(e,{at:f}))return;var l=Y.pointRef(e,f);Tt.delete(e,{at:u}),u=l.unref()}else tt.isPath(u)&&(u=Y.start(e,u));if(a||!Y.void(e,{at:u})){var d=Y.above(e,{at:u,match:function(t){return Y.isInline(e,t)},mode:"highest",voids:a});if(d){var v=h(d,2)[1];if(Y.isEnd(e,u,v))u=Y.after(e,v);else if(Y.isStart(e,u,v)){u=Y.before(e,v)}}var p,g=Y.above(e,{match:function(t){return Y.isBlock(e,t)},at:u,voids:a}),y=h(g,2)[1],m=Y.isStart(e,u,y),b=Y.isEnd(e,u,y),w=!m||m&&b,x=!b,O=Xe.first({children:t},[]),P=h(O,2)[1],A=Xe.last({children:t},[]),k=h(A,2)[1],j=[],E=function(t){var r=h(t,2),n=r[0],o=r[1];return!(w&&tt.isAncestor(o,P)&&V.isElement(n)&&!e.isVoid(n)&&!e.isInline(n))&&!(x&&tt.isAncestor(o,k)&&V.isElement(n)&&!e.isVoid(n)&&!e.isInline(n))},F=Dt(Xe.nodes({children:t},{pass:E}));try{for(F.s();!(p=F.n()).done;){var S=p.value;S[1].length>0&&E(S)&&j.push(S)}}catch(e){F.e(e)}finally{F.f()}for(var _=[],D=[],N=[],C=!0,B=!1,R=0,T=j;R<T.length;R++){var I=h(T[R],1)[0];V.isElement(I)&&!e.isInline(I)?(C=!1,B=!0,D.push(I)):C?_.push(I):N.push(I)}var M=Y.nodes(e,{at:u,match:function(t){return pt.isText(t)||Y.isInline(e,t)},mode:"highest",voids:a}),q=h(M,1)[0],L=h(q,2)[1],z=Y.isStart(e,u,L),W=Y.isEnd(e,u,L),U=Y.pathRef(e,b?tt.next(y):y),$=Y.pathRef(e,W?tt.next(L):L);Tt.splitNodes(e,{at:u,match:function(t){return B?Y.isBlock(e,t):pt.isText(t)||Y.isInline(e,t)},mode:B?"lowest":"highest",voids:a});var J=Y.pathRef(e,!z||z&&W?tt.next(L):L);if(Tt.insertNodes(e,_,{at:J.current,match:function(t){return pt.isText(t)||Y.isInline(e,t)},mode:"highest",voids:a}),Tt.insertNodes(e,D,{at:U.current,match:function(t){return Y.isBlock(e,t)},mode:"lowest",voids:a}),Tt.insertNodes(e,N,{at:$.current,match:function(t){return pt.isText(t)||Y.isInline(e,t)},mode:"highest",voids:a}),!r.at){var G;G=N.length>0?tt.previous($.current):D.length>0?tt.previous(U.current):tt.previous(J.current);var K=Y.end(e,G);Tt.select(e,K)}J.unref(),U.unref(),$.unref()}}}))},insertText:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Y.withoutNormalizing(e,(function(){var n=r.voids,o=void 0!==n&&n,i=r.at,a=void 0===i?e.selection:i;if(a){if(tt.isPath(a)&&(a=Y.range(e,a)),ut.isRange(a))if(ut.isCollapsed(a))a=a.anchor;else{var s=ut.end(a);if(!o&&Y.void(e,{at:s}))return;var u=Y.pointRef(e,s);Tt.delete(e,{at:a,voids:o}),a=u.unref(),Tt.setSelection(e,{anchor:a,focus:a})}if(o||!Y.void(e,{at:a})){var c=a,f=c.path,l=c.offset;t.length>0&&e.apply({type:"insert_text",path:f,offset:l,text:t})}}}))}};function Bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Tt=Rt(Rt(Rt(Rt({},{transform:function(e,t){e.children=Je(e.children);var r=e.selection&&Je(e.selection);try{r=function(e,t,r){switch(r.type){case"insert_node":var n=r.path,o=r.node,i=Xe.parent(e,n),a=n[n.length-1];if(a>i.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(i.children.splice(a,0,o),t){var s,u=mt(ut.points(t));try{for(u.s();!(s=u.n()).done;){var f=h(s.value,2),l=f[0];t[f[1]]=it.transform(l,r)}}catch(e){u.e(e)}finally{u.f()}}break;case"insert_text":var d=r.path,v=r.offset,p=r.text;if(0===p.length)break;var g=Xe.leaf(e,d),y=g.text.slice(0,v),m=g.text.slice(v);if(g.text=y+p+m,t){var b,w=mt(ut.points(t));try{for(w.s();!(b=w.n()).done;){var x=h(b.value,2),O=x[0];t[x[1]]=it.transform(O,r)}}catch(e){w.e(e)}finally{w.f()}}break;case"merge_node":var P=r.path,A=Xe.get(e,P),k=tt.previous(P),j=Xe.get(e,k),E=Xe.parent(e,P),F=P[P.length-1];if(pt.isText(A)&&pt.isText(j))j.text+=A.text;else{if(pt.isText(A)||pt.isText(j))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(P,"] to nodes of different interfaces: ").concat(A," ").concat(j));var S;(S=j.children).push.apply(S,c(A.children))}if(E.children.splice(F,1),t){var _,D=mt(ut.points(t));try{for(D.s();!(_=D.n()).done;){var N=h(_.value,2),C=N[0];t[N[1]]=it.transform(C,r)}}catch(e){D.e(e)}finally{D.f()}}break;case"move_node":var B=r.path,R=r.newPath;if(tt.isAncestor(B,R))throw new Error("Cannot move a path [".concat(B,"] to new path [").concat(R,"] because the destination is inside itself."));var T=Xe.get(e,B),I=Xe.parent(e,B),M=B[B.length-1];I.children.splice(M,1);var q=tt.transform(B,r),L=Xe.get(e,tt.parent(q)),z=q[q.length-1];if(L.children.splice(z,0,T),t){var W,V=mt(ut.points(t));try{for(V.s();!(W=V.n()).done;){var U=h(W.value,2),$=U[0];t[U[1]]=it.transform($,r)}}catch(e){V.e(e)}finally{V.f()}}break;case"remove_node":var J=r.path,G=J[J.length-1];if(Xe.parent(e,J).children.splice(G,1),t){var K,Y=mt(ut.points(t));try{for(Y.s();!(K=Y.n()).done;){var Z=h(K.value,2),X=Z[0],H=Z[1],Q=it.transform(X,r);if(null!=t&&null!=Q)t[H]=Q;else{var ee,te=void 0,re=void 0,ne=mt(Xe.texts(e));try{for(ne.s();!(ee=ne.n()).done;){var oe=h(ee.value,2),ie=oe[0],ae=oe[1];if(-1!==tt.compare(ae,J)){re=[ie,ae];break}te=[ie,ae]}}catch(e){ne.e(e)}finally{ne.f()}te?(X.path=te[1],X.offset=te[0].text.length):re?(X.path=re[1],X.offset=0):t=null}}}catch(e){Y.e(e)}finally{Y.f()}}break;case"remove_text":var se=r.path,ue=r.offset,ce=r.text;if(0===ce.length)break;var fe=Xe.leaf(e,se),le=fe.text.slice(0,ue),de=fe.text.slice(ue+ce.length);if(fe.text=le+de,t){var he,ve=mt(ut.points(t));try{for(ve.s();!(he=ve.n()).done;){var pe=h(he.value,2),ge=pe[0];t[pe[1]]=it.transform(ge,r)}}catch(e){ve.e(e)}finally{ve.f()}}break;case"set_node":var ye=r.path,me=r.properties,be=r.newProperties;if(0===ye.length)throw new Error("Cannot set properties on the root node!");var we=Xe.get(e,ye);for(var xe in be){if("children"===xe||"text"===xe)throw new Error('Cannot set the "'.concat(xe,'" property of nodes!'));var Oe=be[xe];null==Oe?delete we[xe]:we[xe]=Oe}for(var Pe in me)be.hasOwnProperty(Pe)||delete we[Pe];break;case"set_selection":var Ae=r.newProperties;if(null==Ae)t=Ae;else{if(null==t){if(!ut.isRange(Ae))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(Ae)," when there is no current selection."));t=yt({},Ae)}for(var ke in Ae){var je=Ae[ke];if(null==je){if("anchor"===ke||"focus"===ke)throw new Error('Cannot remove the "'.concat(ke,'" selection property'));delete t[ke]}else t[ke]=je}}break;case"split_node":var Ee=r.path,Fe=r.position,Se=r.properties;if(0===Ee.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Ee,"] because the root node cannot be split."));var _e,De=Xe.get(e,Ee),Ne=Xe.parent(e,Ee),Ce=Ee[Ee.length-1];if(pt.isText(De)){var Be=De.text.slice(0,Fe),Re=De.text.slice(Fe);De.text=Be,_e=yt(yt({},Se),{},{text:Re})}else{var Te=De.children.slice(0,Fe),Ie=De.children.slice(Fe);De.children=Te,_e=yt(yt({},Se),{},{children:Ie})}if(Ne.children.splice(Ce+1,0,_e),t){var Me,qe=mt(ut.points(t));try{for(qe.s();!(Me=qe.n()).done;){var Le=h(Me.value,2),ze=Le[0];t[Le[1]]=it.transform(ze,r)}}catch(e){qe.e(e)}finally{qe.f()}}}return t}(e,r,t)}finally{e.children=Ge(e.children),e.selection=r?Q(r)?Ge(r):r:null}}}),At),_t),Ct);e.Editor=Y,e.Element=V,e.Location=Z,e.Node=Xe,e.Operation=et,e.Path=tt,e.PathRef=rt,e.Point=it,e.PointRef=at,e.Range=ut,e.RangeRef=ct,e.Span=X,e.Text=pt,e.Transforms=Tt,e.createEditor=function(){var e={children:[],operations:[],selection:null,marks:null,isInline:function(){return!1},isVoid:function(){return!1},onChange:function(){},apply:function(t){var r,n=P(Y.pathRefs(e));try{for(n.s();!(r=n.n()).done;){var o=r.value;rt.transform(o,t)}}catch(e){n.e(e)}finally{n.f()}var i,a=P(Y.pointRefs(e));try{for(a.s();!(i=a.n()).done;){var s=i.value;at.transform(s,t)}}catch(e){a.e(e)}finally{a.f()}var u,c=P(Y.rangeRefs(e));try{for(c.s();!(u=c.n()).done;){var f=u.value;ct.transform(f,t)}}catch(e){c.e(e)}finally{c.f()}var l,d=new Set,h=[],v=function(e){if(e){var t=e.join(",");d.has(t)||(d.add(t),h.push(e))}},y=p.get(e)||[],m=k(t),b=P(y);try{for(b.s();!(l=b.n()).done;){var w=l.value;v(tt.transform(w,t))}}catch(e){b.e(e)}finally{b.f()}var x,O=P(m);try{for(O.s();!(x=O.n()).done;){v(x.value)}}catch(e){O.e(e)}finally{O.f()}p.set(e,h),Tt.transform(e,t),e.operations.push(t),Y.normalize(e),"set_selection"===t.type&&(e.marks=null),g.get(e)||(g.set(e,!0),Promise.resolve().then((function(){g.set(e,!1),e.onChange(),e.operations=[]})))},addMark:function(t,r){var n=e.selection;if(n)if(ut.isExpanded(n))Tt.setNodes(e,v({},t,r),{match:pt.isText,split:!0});else{var o=O(O({},Y.marks(e)||{}),{},v({},t,r));e.marks=o,g.get(e)||e.onChange()}},deleteBackward:function(t){var r=e.selection;r&&ut.isCollapsed(r)&&Tt.delete(e,{unit:t,reverse:!0})},deleteForward:function(t){var r=e.selection;r&&ut.isCollapsed(r)&&Tt.delete(e,{unit:t})},deleteFragment:function(t){var r=e.selection;r&&ut.isExpanded(r)&&Tt.delete(e,{reverse:"backward"===t})},getFragment:function(){var t=e.selection;return t?Xe.fragment(e,t):[]},insertBreak:function(){Tt.splitNodes(e,{always:!0})},insertFragment:function(t){Tt.insertFragment(e,t)},insertNode:function(t){Tt.insertNodes(e,t)},insertText:function(t){var r=e.selection,n=e.marks;if(r){if(ut.isCollapsed(r)){var o=Y.above(e,{match:function(t){return Y.isInline(e,t)},mode:"highest"});if(o){var i=h(o,2)[1];if(Y.isEnd(e,r.anchor,i)){var a=Y.after(e,i);Tt.setSelection(e,{anchor:a,focus:a})}}}if(n){var s=O({text:t},n);Tt.insertNodes(e,s)}else Tt.insertText(e,t);e.marks=null}},normalizeNode:function(t){var r=h(t,2),n=r[0],o=r[1];if(!pt.isText(n))if(V.isElement(n)&&0===n.children.length){Tt.insertNodes(e,{text:""},{at:o.concat(0),voids:!0})}else for(var i=!Y.isEditor(n)&&(V.isElement(n)&&(e.isInline(n)||0===n.children.length||pt.isText(n.children[0])||e.isInline(n.children[0]))),a=0,s=0;s<n.children.length;s++,a++){var u=Xe.get(e,o);if(!pt.isText(u)){var c=n.children[s],f=u.children[a-1],l=s===n.children.length-1;if((pt.isText(c)||V.isElement(c)&&e.isInline(c))!==i)Tt.removeNodes(e,{at:o.concat(a),voids:!0}),a--;else if(V.isElement(c)){if(e.isInline(c))if(null!=f&&pt.isText(f)){if(l){Tt.insertNodes(e,{text:""},{at:o.concat(a+1),voids:!0}),a++}}else{Tt.insertNodes(e,{text:""},{at:o.concat(a),voids:!0}),a++}}else null!=f&&pt.isText(f)&&(pt.equals(c,f,{loose:!0})?(Tt.mergeNodes(e,{at:o.concat(a),voids:!0}),a--):""===f.text?(Tt.removeNodes(e,{at:o.concat(a-1),voids:!0}),a--):l&&""===c.text&&(Tt.removeNodes(e,{at:o.concat(a),voids:!0}),a--))}}},removeMark:function(t){var r=e.selection;if(r)if(ut.isExpanded(r))Tt.unsetNodes(e,t,{match:pt.isText,split:!0});else{var n=O({},Y.marks(e)||{});delete n[t],e.marks=n,g.get(e)||e.onChange()}}};return e},Object.defineProperty(e,"__esModule",{value:!0})}));
